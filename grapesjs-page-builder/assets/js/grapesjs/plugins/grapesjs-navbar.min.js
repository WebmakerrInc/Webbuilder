(function(root,factory){
  if(typeof define==='function'&&define.amd){
    define(['grapesjs'],factory);
  }else if(typeof exports==='object'){
    module.exports=factory;
  }else{
    factory(root.grapesjs);
  }
})(this,function(grapesjs){
  if(!grapesjs){
    return;
  }
  grapesjs.plugins.add('grapesjs-navbar',function(editor){
    var bm=editor.BlockManager;
    var domc=editor.DomComponents;
    var defaultScript=function(){
      var toggle=this.querySelector('[data-navbar-toggle]');
      var menu=this.querySelector('[data-navbar-menu]');
      if(!toggle||!menu){
        return;
      }
      var openClass='is-open';
      toggle.addEventListener('click',function(){
        if(menu.classList.contains(openClass)){
          menu.classList.remove(openClass);
          menu.setAttribute('aria-hidden','true');
        }else{
          menu.classList.add(openClass);
          menu.setAttribute('aria-hidden','false');
        }
      });
    };
    domc.addType('navbar',{model:{defaults:{tagName:'nav',attributes:{class:'navbar'},droppable:true,script:defaultScript,stylable:true,components:[
      {tagName:'div',attributes:{class:'navbar-container'},components:[
        {tagName:'div',attributes:{class:'navbar-brand'},components:'Brand'},
        {tagName:'button',attributes:{class:'navbar-toggle',type:'button','data-navbar-toggle':'','aria-label':'Toggle navigation'},components:'â˜°'},
        {tagName:'div',attributes:{class:'navbar-menu is-open','data-navbar-menu':'','aria-hidden':'false'},components:[
          {tagName:'a',attributes:{class:'navbar-link',href:'#'},components:'Home'},
          {tagName:'a',attributes:{class:'navbar-link',href:'#'},components:'Features'},
          {tagName:'a',attributes:{class:'navbar-link',href:'#'},components:'Contact'}
        ]}
      ]}
    ],styles:'nav.navbar{background:#343a40;color:#fff;padding:15px;}nav.navbar .navbar-container{display:flex;align-items:center;gap:20px;}nav.navbar .navbar-brand{font-size:20px;font-weight:600;}nav.navbar .navbar-menu{display:flex;gap:15px;}nav.navbar .navbar-link{color:#fff;text-decoration:none;font-weight:500;}nav.navbar .navbar-toggle{display:none;padding:8px 12px;background:#495057;color:#fff;border:none;border-radius:4px;}@media (max-width:768px){nav.navbar .navbar-container{flex-wrap:wrap;}nav.navbar .navbar-toggle{display:inline-block;margin-left:auto;}nav.navbar .navbar-menu{width:100%;display:none;flex-direction:column;padding-top:15px;}nav.navbar .navbar-menu.is-open{display:flex;}}'}}});
    if(!bm.get('gjs-navbar')){
      bm.add('gjs-navbar',{
        label:'Navbar',
        category:'Navigation',
        attributes:{class:'gjs-fonts gjs-f-navbar'},
        content:{type:'navbar'}
      });
    }
  });
});
